<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aures Click Elite - Demo 2026</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.1.6/purify.min.js"></script>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { 
        extend: { 
          colors: { 
            ai: '#4f46e5', 
            vendor: '#10b981',
            warning: '#f59e0b'
          } 
        } 
      }
    }
  </script>

  <style>
    body { font-family: 'Cairo', sans-serif; transition: background-color 0.3s, color 0.3s; }
    .view { display: none; opacity: 0; transform: translateY(12px); transition: all 0.45s ease-out; }
    .view.active { display: block; opacity: 1; transform: translateY(0); }
    .cart-drawer { transition: transform 0.45s cubic-bezier(0.32, 0.72, 0, 1); }
    .toast { animation: slideIn 0.4s ease-out, fadeOut 0.4s 2.6s forwards; }
    @keyframes slideIn { from { transform: translateX(120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    @keyframes fadeOut { to { opacity: 0; transform: translateX(20px); } }
  </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 min-h-screen antialiased">

<div id="toast-container" class="fixed bottom-6 right-4 md:right-8 z-[100] flex flex-col gap-3 max-w-xs"></div>

<nav class="sticky top-0 z-50 bg-white/90 dark:bg-slate-900/90 backdrop-blur-lg border-b dark:border-slate-800 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
    <h1 onclick="app.show('home')" class="text-2xl md:text-3xl font-black text-ai cursor-pointer tracking-tight">AURES CLICK</h1>
    <div class="flex items-center gap-3">
      <button onclick="app.toggleTheme()" class="p-2.5 rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 transition" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…">ğŸŒ“</button>
      <button onclick="app.toggleCart()" class="relative p-2.5 rounded-xl bg-ai/10 text-ai hover:bg-ai/20 transition">
        ğŸ›’ 
        <span id="cart-count" class="absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center ring-2 ring-white dark:ring-slate-900">0</span>
      </button>
    </div>
  </div>
</nav>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-10">
  <section id="view-home" class="view active">
    <div class="mb-8 space-y-5">
      <input 
        id="search-input" 
        type="search" 
        placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ØŒ Ù…Ø§Ø±ÙƒØ©ØŒ ÙØ¦Ø©..." 
        class="w-full p-4 rounded-2xl bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-700 focus:border-ai focus:ring-2 focus:ring-ai/40 outline-none shadow-sm transition"
      >
      <div class="flex gap-2.5 overflow-x-auto pb-3 scrollbar-hide" id="cat-filters">
        <button data-cat="all" class="cat-btn shrink-0 px-7 py-2.5 rounded-full bg-ai text-white font-medium shadow-lg shadow-ai/25 whitespace-nowrap">Ø§Ù„ÙƒÙ„</button>
        <button data-cat="tech" class="cat-btn shrink-0 px-7 py-2.5 rounded-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 font-medium whitespace-nowrap hover:border-ai/50 transition">ØªÙ‚Ù†ÙŠØ©</button>
        <button data-cat="fashion" class="cat-btn shrink-0 px-7 py-2.5 rounded-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 font-medium whitespace-nowrap hover:border-ai/50 transition">Ù…ÙˆØ¶Ø©</button>
      </div>
    </div>

    <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5 md:gap-7"></div>
  </section>
</main>

<!-- Cart Drawer -->
<div id="cart-overlay" onclick="app.toggleCart()" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden transition-opacity"></div>
<div id="cart-drawer" class="cart-drawer fixed inset-y-0 right-0 w-full max-w-md bg-white dark:bg-slate-900 z-[70] shadow-2xl translate-x-full flex flex-col">
  <div class="p-6 border-b dark:border-slate-800 flex items-center justify-between">
    <h2 class="text-xl md:text-2xl font-black">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
    <button onclick="app.toggleCart()" class="text-3xl leading-none hover:text-ai transition">&times;</button>
  </div>
  
  <div id="cart-items" class="flex-1 overflow-y-auto p-5 md:p-6 space-y-5"></div>
  
  <div class="p-6 border-t dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40">
    <div class="flex justify-between items-center mb-5 text-lg font-bold">
      <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
      <span id="cart-total" class="text-ai text-xl">0 Ø¯Ø¬</span>
    </div>
    <button onclick="app.checkout()" class="w-full bg-ai hover:bg-indigo-700 text-white py-4 rounded-2xl font-bold text-lg shadow-xl shadow-ai/30 active:scale-[0.98] transition disabled:opacity-50 disabled:cursor-not-allowed">
      Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†
    </button>
    <p class="text-center text-xs text-slate-500 dark:text-slate-400 mt-4">
      Ù‡Ø°Ø§ Ù†Ù…ÙˆØ°Ø¬ ØªØ¬Ø±ÙŠØ¨ÙŠ â€“ Ù„Ø§ ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¯ÙØ¹ Ø­Ù‚ÙŠÙ‚ÙŠ
    </p>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
class AuresStore {
  constructor() {
    this.initialProducts = [
      {id:1, name:"ÙƒØ§Ù…ÙŠØ±Ø§ Sony Î±7 IV",          price:340000, cat:"tech", stock:5,  img:"https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=500&h=500"},
      {id:2, name:"Ø¬Ø§ÙƒÙŠØª Ø¬Ù„Ø¯ÙŠ ÙØ§Ø®Ø±",            price:18500,  cat:"fashion", stock:12, img:"https://images.unsplash.com/photo-1551028719-00167b16eac5?w=500&h=500"},
      {id:3, name:"Ù„Ø§Ø¨ØªÙˆØ¨ Razer Blade 16",       price:290000, cat:"tech", stock:2,  img:"https://images.unsplash.com/photo-1611078489935-0cb4c2497a00?w=500&h=500"},
      {id:4, name:"Ø³Ø§Ø¹Ø© Ù…ÙŠÙ†ÙŠÙ…Ø§Ù„ÙŠØ³Øª ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©",   price:9500,   cat:"fashion", stock:8,  img:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&h=500"},
      {id:5, name:"Ø³Ù…Ø§Ø¹Ø© Sony WH-1000XM5",       price:98000,  cat:"tech", stock:7,   img:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&h=500"},
    ];

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª â€“ Ù†Ø³ØªØ®Ø¯Ù… Ù†Ø³Ø®Ø© Ø¢Ù…Ù†Ø© Ù†Ø³Ø¨ÙŠØ§Ù‹
    this.products = this.loadSafe("aures_inventory", this.initialProducts);
    this.cart     = this.loadSafe("aures_cart", []);
    this.activeCat = "all";
    this.searchTerm = "";

    this.init();
  }

  loadSafe(key, defaultValue) {
    try {
      const data = localStorage.getItem(key);
      return data ? JSON.parse(data) : defaultValue;
    } catch (e) {
      console.warn("ÙØ´Ù„ Ù‚Ø±Ø§Ø¡Ø© localStorage:", e);
      return defaultValue;
    }
  }

  saveSafe(key, value) {
    try {
      localStorage.setItem(key, JSON.stringify(value));
    } catch (e) {
      console.error("ÙØ´Ù„ Ø­ÙØ¸ localStorage:", e);
      this.showToast("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ", "warning");
    }
  }

  init() {
    this.renderProducts();
    this.updateCartUI();
    this.setupListeners();
    if (localStorage.getItem("theme") === "dark") {
      document.documentElement.classList.add("dark");
    }
  }

  setupListeners() {
    const search = document.getElementById("search-input");
    if (search) {
      search.addEventListener("input", e => {
        this.searchTerm = e.target.value.trim().toLowerCase();
        this.renderProducts();
      });
    }

    document.querySelectorAll(".cat-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        this.activeCat = btn.dataset.cat;
        document.querySelectorAll(".cat-btn").forEach(b => {
          b.className = "cat-btn shrink-0 px-7 py-2.5 rounded-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 font-medium hover:border-ai/50 transition whitespace-nowrap";
        });
        btn.className = "cat-btn shrink-0 px-7 py-2.5 rounded-full bg-ai text-white font-medium shadow-lg shadow-ai/25 whitespace-nowrap";
        this.renderProducts();
      });
    });
  }

  renderProducts() {
    const grid = document.getElementById("products-grid");
    if (!grid) return;

    const filtered = this.products.filter(p => 
      (this.activeCat === "all" || p.cat === this.activeCat) &&
      (!this.searchTerm || p.name.toLowerCase().includes(this.searchTerm))
    );

    grid.innerHTML = filtered.map(p => `
      <div class="group bg-white dark:bg-slate-900 rounded-3xl overflow-hidden border border-slate-200 dark:border-slate-800 hover:border-ai/60 hover:shadow-xl transition-all duration-300">
        <div class="relative h-64 md:h-72 overflow-hidden bg-slate-100 dark:bg-slate-800">
          <img src="\( {p.img}" alt=" \){DOMPurify.sanitize(p.name)}" class="w-full h-full object-cover group-hover:scale-105 transition duration-700 ease-out">
          ${p.stock <= 3 ? `<span class="absolute top-4 right-4 bg-red-600 text-white text-xs px-3 py-1 rounded-full font-bold shadow">Ø¨Ù‚ÙŠ ${p.stock} ÙÙ‚Ø·!</span>` : ''}
        </div>
        <div class="p-5">
          <h3 class="font-bold text-lg mb-2 line-clamp-2">${DOMPurify.sanitize(p.name)}</h3>
          <div class="text-2xl font-black text-ai mb-4">${p.price.toLocaleString('ar-DZ')} <span class="text-base font-normal">Ø¯Ø¬</span></div>
          <button 
            onclick="app.addToCart(${p.id})" 
            ${p.stock <= 0 ? 'disabled' : ''} 
            class="w-full py-3.5 rounded-2xl font-bold transition text-base flex items-center justify-center gap-2
            ${p.stock <= 0 
              ? 'bg-slate-200 dark:bg-slate-800 text-slate-500 cursor-not-allowed' 
              : 'bg-slate-900 dark:bg-white dark:text-slate-900 text-white hover:bg-ai hover:text-white dark:hover:bg-ai dark:hover:text-white'}">
            ${p.stock <= 0 ? 'Ù†ÙØ¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†' : 'ğŸ›’ Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©'}
          </button>
        </div>
      </div>
    `).join("");
  }

  addToCart(id) {
    const product = this.products.find(p => p.id === id);
    if (!product || product.stock <= 0) {
      this.showToast("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹", "warning");
      return;
    }

    let cartItem = this.cart.find(i => i.id === id);
    if (cartItem) {
      cartItem.qty++;
    } else {
      cartItem = { ...product, qty: 1 };
      this.cart.push(cartItem);
    }

    product.stock--;
    this.saveAndRefresh();

    this.showToast(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${product.name} Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© âœ…`);
    if (product.stock <= 3) {
      this.showToast(`Ø¨Ù‚ÙŠ ${product.stock} Ù‚Ø·Ø¹ ÙÙ‚Ø· Ù…Ù† ${product.name}!`, "warning");
    }
  }

  changeQty(id, delta) {
    const item = this.cart.find(i => i.id === id);
    const product = this.products.find(p => p.id === id);
    if (!item || !product) return;

    if (delta > 0 && product.stock > 0) {
      item.qty++;
      product.stock--;
    } else if (delta < 0 && item.qty > 0) {
      item.qty--;
      product.stock++;
      if (item.qty <= 0) {
        this.cart = this.cart.filter(i => i.id !== id);
      }
    }

    this.saveAndRefresh();
  }

  updateCartUI() {
    const container = document.getElementById("cart-items");
    const countEl   = document.getElementById("cart-count");
    const totalEl   = document.getElementById("cart-total");

    const count = this.cart.reduce((sum, i) => sum + i.qty, 0);
    const total = this.cart.reduce((sum, i) => sum + (i.price * i.qty), 0);

    countEl.textContent = count;
    totalEl.textContent = total.toLocaleString('ar-DZ') + " Ø¯Ø¬";

    if (this.cart.length === 0) {
      container.innerHTML = `<div class="text-center py-24 text-slate-400 dark:text-slate-500 italic">Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠØ§Ù‹...</div>`;
      return;
    }

    container.innerHTML = this.cart.map(item => `
      <div class="flex items-center gap-4 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-slate-200 dark:border-slate-700">
        <img src="\( {item.img}" alt=" \){DOMPurify.sanitize(item.name)}" class="w-20 h-20 rounded-xl object-cover flex-shrink-0">
        <div class="flex-1 min-w-0">
          <h4 class="font-bold text-base truncate">${DOMPurify.sanitize(item.name)}</h4>
          <div class="text-ai font-bold mt-1">${item.price.toLocaleString('ar-DZ')} Ø¯Ø¬</div>
          <div class="flex items-center gap-4 mt-3">
            <button onclick="app.changeQty(${item.id}, -1)" class="w-9 h-9 rounded-full bg-white dark:bg-slate-700 border dark:border-slate-600 flex items-center justify-center text-lg font-bold hover:bg-slate-100 dark:hover:bg-slate-600 transition">-</button>
            <span class="font-bold text-lg min-w-[2ch] text-center">${item.qty}</span>
            <button onclick="app.changeQty(${item.id}, 1)" class="w-9 h-9 rounded-full bg-white dark:bg-slate-700 border dark:border-slate-600 flex items-center justify-center text-lg font-bold hover:bg-slate-100 dark:hover:bg-slate-600 transition">+</button>
          </div>
        </div>
      </div>
    `).join("");
  }

  saveAndRefresh() {
    this.saveSafe("aures_cart", this.cart);
    this.saveSafe("aures_inventory", this.products);
    this.updateCartUI();
    this.renderProducts();
  }

  showToast(msg, type = "success") {
    const colors = {
      success: "border-l-4 border-green-500 bg-green-50 dark:bg-green-950/30 text-green-800 dark:text-green-200",
      warning: "border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-950/30 text-yellow-800 dark:text-yellow-200",
      error:   "border-l-4 border-red-500 bg-red-50 dark:bg-red-950/30 text-red-800 dark:text-red-200"
    };

    const toast = document.createElement("div");
    toast.className = `toast p-4 rounded-2xl shadow-2xl font-medium flex items-center gap-3 ${colors[type] || colors.success}`;
    toast.innerHTML = `<span>${DOMPurify.sanitize(msg)}</span>`;
    document.getElementById("toast-container").appendChild(toast);

    setTimeout(() => toast.remove(), 3200);
  }

  toggleCart() {
    document.getElementById("cart-drawer").classList.toggle("translate-x-full");
    document.getElementById("cart-overlay").classList.toggle("hidden");
  }

  toggleTheme() {
    document.documentElement.classList.toggle("dark");
    localStorage.setItem("theme", document.documentElement.classList.contains("dark") ? "dark" : "light");
  }

  checkout() {
    if (this.cart.length === 0) {
      this.showToast("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!", "warning");
      return;
    }

    this.showToast("Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ... ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±", "success");

    // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± Ù…Ø¹Ø§Ù„Ø¬Ø© (ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ â†’ POST Ø¥Ù„Ù‰ API)
    setTimeout(() => {
      alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!\nØ´ÙƒØ±Ø§Ù‹ Ù„ØªØ¬Ø±Ø¨ØªÙƒ Ù…Ø¹ Aures Click (Ù†Ø³Ø®Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©)");
      this.cart = [];
      this.saveAndRefresh();
      this.toggleCart();
    }, 1800);
  }

  show(view) {
    // ÙŠÙ…ÙƒÙ† ØªÙˆØ³ÙŠØ¹Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù„ØµÙØ­Ø§Øª Ø£Ø®Ø±Ù‰
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.getElementById(`view-${view}`).classList.add('active');
  }
}

const app = new AuresStore();
window.app = app;
</script>
</body>
</html>